<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>DEMAT-BT ‚Äî Interface (V1.3)</title>
  <link rel="stylesheet" href="./styles.css" />

  <!-- PDF.js (CDN) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.10.38/pdf.min.js" defer></script>
</head>

<body>
  <header class="topbar">
    <div class="brand">
      <div class="brand__title">DEMAT-BT</div>
      <div class="brand__sub">D√©mat√©rialisation BT ‚Äî Interface</div>
    </div>

    <div class="topbar__right">
      <div class="pill">Version <strong id="appVersion">V1.3</strong></div>
      <div class="pill" id="nowInfo">‚Äî</div>
    </div>
  </header>

  <main class="shell">
    <!-- Colonne gauche -->
    <section class="panel">
      <div class="card">
        <div class="card__header">
          <h2>PDF du jour</h2>
          <p class="muted">Importer puis afficher / extraire.</p>
        </div>

        <div class="row">
          <label class="btn btn--secondary">
            Importer PDF
            <input id="pdfFile" type="file" accept="application/pdf" hidden />
          </label>

          <button id="btnView" class="btn" disabled>Afficher</button>
          <button id="btnExtract" class="btn btn--ghost" disabled>Extraire</button>
        </div>

        <div class="mini">
          <div class="mini__k">
            <span class="dot dot--ok"></span>
            <span>Statut</span>
          </div>
          <div class="mini__v" id="pdfStatus">Aucun PDF</div>
        </div>

        <div class="mini">
          <div class="mini__k">
            <span class="dot dot--info"></span>
            <span>R√©sultat</span>
          </div>
          <div class="mini__v" id="extractStatus">‚Äî</div>
        </div>
      </div>

      <div class="card">
        <div class="card__header">
          <h2>Liste BT</h2>
          <p class="muted">S√©lectionne un BT pour afficher un extrait.</p>
        </div>

        <div class="list" id="btList">
          <div class="empty">Aucun BT (fais ‚ÄúExtraire‚Äù).</div>
        </div>
      </div>
    </section>

    <!-- Colonne centre -->
    <section class="panel panel--center">
      <div class="card viewer">
        <div class="viewer__top">
          <div class="viewer__title">
            <h2>Aper√ßu PDF</h2>
            <span class="muted" id="pdfMeta">‚Äî</span>
          </div>

          <div class="viewer__nav">
            <button id="btnPrev" class="btn btn--ghost" disabled>‚óÄ</button>
            <div class="pill">
              Page <strong id="pageNum">‚Äî</strong>/<span id="pageCount">‚Äî</span>
            </div>
            <button id="btnNext" class="btn btn--ghost" disabled>‚ñ∂</button>
          </div>
        </div>

        <div class="viewer__canvasWrap">
          <canvas id="pdfCanvas"></canvas>
          <div id="viewerOverlay" class="viewer__overlay">
            D√©pose un PDF via ‚ÄúImporter PDF‚Äù.
          </div>
        </div>
      </div>

      <div class="card">
        <div class="card__header">
          <h2>Extrait du BT s√©lectionn√©</h2>
          <p class="muted">On affiche un extrait de texte (base simple).</p>
        </div>
        <pre class="pre" id="btPreview">‚Äî</pre>
      </div>
    </section>

    <!-- Colonne droite -->
    <section class="panel">
      <div class="card">
        <div class="card__header">
          <h2>Timeline</h2>
          <p class="muted">07:30 ‚Üí 17:00 (pas 30 min).</p>
        </div>

        <div class="timeline" id="timeline">
          <div class="timeline__header" id="timelineHeader"></div>
          <div class="timeline__grid" id="timelineGrid"></div>
        </div>

        <div class="hint">
          Astuce : la timeline est volontairement ‚Äúpropre et stable‚Äù. On branchera les vrais BT ensuite.
        </div>
      </div>

      <div class="card">
        <div class="card__header">
          <h2>Mode</h2>
          <p class="muted">Interface claire (gris doux).</p>
        </div>

        <div class="seg">
          <button class="seg__btn seg__btn--active" type="button">Interface</button>
          <button class="seg__btn" type="button" disabled>Black UI (d√©sactiv√© üòÑ)</button>
        </div>
      </div>
    </section>
  </main>

  <script src="./app.js" defer></script>
</body>
</html>
